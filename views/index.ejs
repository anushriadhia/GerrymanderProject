<!DOCTYPE html>
<html>
  <head>
    <title><%= title %></title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js" type="text/javascript"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.17/d3.min.js"></script>
    <link rel = "stylesheet" href ="https://cdnjs.cloudflare.com/ajax/libs/c3/0.4.18/c3.min.css">
    <script src = "https://cdnjs.cloudflare.com/ajax/libs/c3/0.4.18/c3.min.js"></script>
    <link rel='stylesheet' href='/stylesheets/style.css'/>
  </head>
  <body>
    <h1><%= title %></h1>
    <p>Welcome to <%= title %></p>
    2016 NC Election Information:
    <div id = "pieChart"></div>
    <div id = "barChart"></div>
    <div id = "timeChart"></div>
    <script>
        $(document).ready(function() {

            var pieChart = c3.generate({
                title: {
                    text: '2016 NC Registered Voter Party Affiliation'
                },
                bindto: '#pieChart',
                data: {
                    // iris data from R
                    columns: [
                        ['Democrat', <%= var1 %>],
                        ['Republican', 33],
                        ['Independent', 30],
                    ],
                    type : 'pie'//,
                    //onclick: function (d, i) { console.log("onclick", d, i); },
                    //onmouseover: function (d, i) { console.log("onmouseover", d, i); },
                    //onmouseout: function (d, i) { console.log("onmouseout", d, i); }
                }
            });

            var barChart = c3.generate({
                title: {
                    text: '2016 NC Registered Voter Party Affiliation'
                },
                bindto: '#barChart',
                data: {
                    // iris data from R
                    columns: [
                        ['Democrat', 57],
                        ['Republican', 33],
                        ['Independent', 10],
                    ],
                    type : 'bar'//,
                    //onclick: function (d, i) { console.log("onclick", d, i); },
                    //onmouseover: function (d, i) { console.log("onmouseover", d, i); },
                    //onmouseout: function (d, i) { console.log("onmouseout", d, i); }
                },
                bar: {
                    width: {
                        ratio: 0.5
                    }
                }
            });

            //var vector = <%- vec1 %>.toString();

            //var vecsub = vector.substring(1,vector.indexOf("]"));

            //var vec2 = vector.replace("{","[");
            //vec2 = vec2.replace("}","]");

            //console.log(vec2);

            //console.log(vecsub);

            var timeChart = c3.generate({
                title: {
                    text: '2016 NC Voter Gubernatorial Preference'
                },
                bindto: '#timeChart',
                data: {
                    x: 'x',
                    columns: [

                        ['x', '2016-01-01', '2016-02-01'],
                        ['McCrory', 37,54],
                        ['Cooper', 42, 40]
                    ],
                },
                axis: {
                    x: {
                        type: 'timeseries',
                        tick: {
                            format: "%Y-%m-%d"
                        }
                    }
                }
            });
        });
    </script>
  </body>
</html>
